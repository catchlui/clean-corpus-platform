run:
  run_id: "Test_Minimal_2026-01-29"
  out_dir: "storage_test"
  shard_docs: 2
  log_every_docs: 1
  checkpoint_every_docs: 2
  policy_version: "policy_v1"

execution:
  mode: local

sources:
  - name: "test_source"
    type: "batch"
    kind: "local_jsonl"
    dataset: "examples/sample_internal.jsonl"
    split: "train"
    text_field: "text"
    license_field: "license"
    url_field: "url"

policies:
  licenses: "src/clean_corpus/policies/defaults/licenses.yaml"
  quality: "src/clean_corpus/policies/defaults/quality.yaml"
  pii: "src/clean_corpus/policies/defaults/pii.yaml"
  curriculum: "src/clean_corpus/policies/defaults/curriculum.yaml"

# Minimal stages to avoid scipy/torch dependency issues
stages:
  - license_gate
  - sanitize
  # Skip stages that require scipy: exact_dedup, near_dup_minhash, semantic_simhash
  - quality_gate
  - pii_policy_gate
  - curriculum_eligibility
